<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>2019新年大酬宾 5‰充值回馈无上限！</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/newyear.css?v=1.2">
	<link rel="stylesheet" type="text/css" href="css/popup.css?v=1">
	<script type="text/javascript" src="js/fastclick.js"></script>
</head>

<body>
	<div class="wrapper w1">
		<div class="banner w1">
			<img class="banner2 w1" src="img/newyear/img_02@3x.png" alt="">
		</div>
		<div class="actTerm w1">
			<div class="btnBar mat">
				<div id="draw" class="btn">
					立即领取<i class="bonus">0</i><i class="yuan">元</i>奖金
				</div>
				<div id="topUp" class="btn" onclick="back()">
					立即充值
				</div>
			</div>
			<div class="conTitle mat"></div>
			<ul class="termList mat">
				<li class="clearfix">
					<i class="termIndex fl">01</i>
					<p class="fl">玩家每次充值即可获得<span class="st">5‰</span>奖金回馈，奖金可自行领取；</p>
				</li>
				<li class="clearfix">
					<i class="termIndex fl">02</i>
					<p class="fl">充值成功后系统随机选择一项产品送出回馈奖金；</p>
				</li>
				<li class="clearfix">
					<i class="termIndex fl">03</i>
					<p class="fl">奖金回馈无充值次数限制、<span class="st">无金额上限</span>；</p>
				</li>
			</ul>
			<div class="termTitle mat"></div>
			<ul class="termList mat">
				<li class="clearfix">
					<i class="termIndex fl">01</i>
					<p class="fl">玩家需在获得奖金的产品中完成一倍流水可提现或转出;</p>
				</li>
				<li class="clearfix">
					<i class="termIndex special fl">02</i>
					<p class="fl special">如奖金发放的产品为“体育”并且单次充值金额低于200元，则奖金视为无效；</p>
				</li>
				<li class="clearfix">
					<i class="termIndex fl">03</i>
					<p class="fl">如未在指定产品中完成流水要求，将奖金转让其它产品盈利将视为无效；</p>
				</li>
				<li class="clearfix">
					<i class="termIndex special fl">04</i>
					<p class="fl special">每位玩家、每一组电话号码、每一IP、相同支付方式（含相同借记卡，信用卡，银行帐号）
只能申请一次；</p>
				</li>
				<li class="clearfix">
					<i class="termIndex fl">05</i>
					<p class="fl">如发现恶意刷取活动套利者，将扣除红利及所得盈利。</p>
				</li>
				<li class="clearfix">
					<i class="termIndex special fl">06</i>
					<p class="fl special">凡参加活动用户，即表示接受且自愿遵守平台规定，平台保留最终解释权。</p>
				</li>
				<li class="clearfix timeLi">
					<i class="timeIndex">活动时间：</i><br>2018年12月30日23:59分-1月19日23:59分
				</li>
			</ul>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="js/common.js"></script>
	<script type="text/javascript" src="js/popup.js"></script>
	<script type="text/javascript">
		FastClick.attach(document.body);
	  	var hasLogin = false;
	  	//h5登录
	  	if (location.href.indexOf('type=h5') != -1) {
	      if (location.href.indexOf('hasLogin=true') != -1) {
	        hasLogin = true;
	        query ();
	      }else{
	        if ( parent && parent.closeIFrame ) {
	          parent.closeIFrame({action: 'goLogin'})
	        } else {
	          if ( location.search != '?goLogin') {
	            location.search = 'goLogin'
	          }
	        }
	      }
	    }
        window.onload = function() {
            if (window.android) {
                hasLogin = android.isLogin();
            }
            if(hasLogin){
                query ();
            }
        }
        function isLogin(b) {
            hasLogin = b
            if(hasLogin){
                query ();
            }
        }

        function isiOS() {
            var u = navigator.userAgent;
            return !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
        }

        function back() {
	        if (!hasLogin) {
	            // 还没登录则先登录
	            if (location.href.indexOf('type=h5') != -1) {
		        	if ( parent && parent.closeIFrame ) {
			          parent.closeIFrame({action: 'goLogin'})
			        } else {
			          if ( location.search != '?goLogin') {
			            location.search = 'goLogin'
			          }
			        }
		      	} else {
		            if (isiOS()) {
		                //window.webkit.messageHandlers.goAppLogin.postMessage(null);
		                goAppLogin();
		            } else if (window.android) {
		                android.goAppLogin();
		            }
		        }
	            return;
	        }

	        if (location.href.indexOf('type=h5') != -1) {
	        	if ( parent && parent.closeIFrame ) {
		          parent.closeIFrame({action: 'goToLoad'})
		        }
	      	} else {
	      		if (isiOS()) {
	      			go('load');
	      		} else if (window.android) {
	            	android.go('load');
	        	}
	      	}
	        return;
	    }


	    $(document).on('click', '#draw', function(){
	        draw ();
		});

	     function query () {
	    	$.ajax({
			    url: "/Promos/Detail",
			    jsonp: "callback",
			    // dataType: "jsonp",
			    async: true,
			    data: { "id": "38","a": "Check" },    //参数值
			    type: "GET",   //请求方式
			    beforeSend: function() {
			        //请求前的处理
			    },
			    success: function(req) {
			    	var num = Number(req.data);
			    	if (req.state) {
			    		if( num <= 0){
			    			$('#draw').css('display','none');
			    			$('#topUp').css('display','block');
			    		}else{
			    			$('#topUp').css('display','none');
			    			$('#draw').css('display','block');
			    			$('#draw .bonus').html(num);
			    		}
			    	}else{
			    		if ( req.message == '暂无奖金可领取' ) {
			    			$('#draw').css('display','none');
			    			$('#topUp').css('display','block');
			    		} else if ( req.message == 'login' ) {
		    			 	if (isiOS()) {
				                goAppLogin();
				            } else if (window.android) {
				                android.goAppLogin();
				            }
			    		} else{
			    			var popup = new Popup({
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.message
						    })
			    		}
			    	}
			    }
			});
		}

		function draw () {
	    	$.ajax({
			    url: "/Promos/Detail",
			    jsonp: "callback",
			    // dataType: "jsonp",
			    async: true,
			    data: { "id": "38","a": "Claim" },    //参数值
			    type: "GET",   //请求方式
			    beforeSend: function() {
			        //请求前的处理
			    },
			    success: function(req) {
			    	if (req.state) {
			    		var popup = new Popup({
					        'type': 'submit',
					        'title': '提示信息',
					        'text': req.data,
					        'submitCallBack': function(){
								location.reload()
					      	},
					      	'closeCallBack': function(){
								location.reload()
					      	}
					    })
			    	}else{
			    		if ( req.message == 'login') {
			    			var popup = new Popup({
						        'type': 'submit',
						        'title': '提示信息',
						        'text': '请先登录'
						    })
			    		}else {
			    			var popup = new Popup({
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.message
						    })
			    		}

			    	}
			    }
			});
		}
	</script>
</body>
