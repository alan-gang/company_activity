<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name ="viewport" content ="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no">
	<meta name="viewport" content="width=device-width,user-scalable=yes">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no">
    <title>喜迎中秋节 全民抢红包！</title>
	<link rel="stylesheet" type="text/css" href="css/redpacketMid.css?v=0.4">
	<link rel="stylesheet" type="text/css" href="css/popup.css">
	<script src="js/common.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/fastclick.js"></script>
</head>

<body>
	<div class="wrapper w1">
		<div class="bannerWrap w1 mat">
			<div class="top-box">
				<div class="top1"></div>
				<div class="top2"></div>
			</div>
		</div>
		<div class="conWrap w1">
			<div class="content w1 mat">
				<div class="title timeTitle">
					<span>活</span>
					<span>动</span>
					<span>时</span>
					<span>间</span>
				</div>
				<div class="info timeInfo">
					2019年9月1日00:00:00--9月15日23:59:59
				</div>
				<div class="title timeTitle">
					<span>活</span>
					<span>动</span>
					<span>内</span>
					<span>容</span>
				</div>
				<div class="conInfo">
					<div class="info giftInfo">
						活动期间，用户的总投注额每累计1000元，即可累计获得1次抢红包的机会，获得机会后在红包池里面争抢未开启的红包。
					</div>
					<div class="listWrap">
						<table class="tableList conList mat" border="1" cellspacing="0" cellpadding="0">
							<thead>
								<tr>
									<th>红包类型</th>
									<th>红包内容</th>
									<th>消耗机会次数</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td class="p1 rp">初级红包</td>
									<td>刮刮乐1张、1元、2元、3元、4元、5元、10元、888元、1888元、2888元、5888元、8888元</td>
									<td>每抢一个消耗<br><span class="sp">1</span>次机会</td>
								</tr>
								<tr>
									<td class="p2 rp">高级红包</td>
									<td>6元、10元、20元、30元、40元、50元、100元、888元、1888元、2888元、5888元、8888元</td>
									<td>每抢一个消耗<br><span class="sp">10</span>次机会</td>
								</tr>
								<tr>
									<td class="p3 rp">终级红包</td>
									<td>60元、100元、200元、300元、400元、500元、1000元、888元、1888元、2888元、5888元、8888元</td>
									<td>每抢一个消耗<br><span class="sp">100</span>次机会</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="goRedpacket mat">
					我要抢红包
				</div>
				<div class="title timeTitle">
					<span>活</span>
					<span>动</span>
					<span>规</span>
					<span>则</span>
				</div>
				<div class="info ruleInfo">
					<ul class="termList">
						<li>
								<span>1</span>此活动投注统计范围为：彩票、棋牌、电游、电竞、体育产品中的有效流水；
							</li>
							<li>
								<span>2</span>每个等级的奖池当中默认有500个未开启的红包，豪礼红包 888、1888、2888、5888、8888 会随机分布在每个奖池当中，奖池等级越高获得豪礼红包的机会越大；
							</li>
							<li>
								<span>3</span>当奖池中的红包剩余数量小于50个或豪礼红包都被开启后，系统将会重新刷新分配500个新红包；
							</li>
							<li>
								<span>4</span>任何违规投注、对打、套利行为，信游将保留冻结账号扣除盈利的权利；
							</li>
							<li>
								<span>5</span>每位玩家只能享有一次优惠，且同一住址、电话号码﹑电子邮箱地址、IP（例如网吧，其他公共用计算机）﹑支付方式(相同借记卡/银行帐户姓名及号码)仅适用一次活动优惠，若玩家有重复申请（如关联账号）之行为，信游将保留或取消玩家优惠彩金的权利；
							</li>
							<li>
								<span>6</span>平台保有修改活动以及解释活动之权利。
							</li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mask">
			<div class="choose clearfix">
				<div class="closeMask"></div>
				<div class='tabs fl'>
				    <ul class="tabTop clearfix">
				        <li class="fl">
				        	<a class="tabTitle tt1" alt="#tab-1">抢红包</a>
				        </li>
				        <li class="fl">
				        	<a class="tabTitle tt2" alt="#tab-2">排行榜</a>
				        </li>
				        <li class="fl">
				        	<a class="tabTitle tt3" alt="#tab-3">我的记录</a>
					    </li>
				    </ul>

					<!-- 抢红包 -->
				    <div id='tab-1' class="tabCon w1">
				    	<div class='tabsC'>
						    <ul class="tabCTop clearfix mat">
						        <li class="fl" data-id="1">
						        	<a class="tt1" alt="#tab-4">初级红包</a>
						        </li>
						        <li class="fl" data-id="2">
						        	<a class="tt2" alt="#tab-5">高级红包</a>
						        </li>
						        <li class="fl" data-id="3">
						        	<a class="tt3" alt="#tab-6">终极红包</a>
							    </li>
						    </ul>
						    <!-- 初级红包 -->
						    <div id='tab-4' class="tabInfo w1" data-id="1">
						    	<div class="t2 w1">
						    		每抢一个消耗<i class="tsp">1</i>次机会,您还有<i class="times">0</i>次机会
						    	</div>
						    	<div class="ulWrap w1">
									<ul id="ulList" class="ulList clearfix">
										<!-- <li class="fl">
											<div class="packetLi w1">
												<a href="javascript:" title="" class="usedMask w1">
													<p class="prize w1">209元</p>
													<p class="userName w1">t**5555dd</p>
													<p class="getTime w1">2019-01-03</p>
												</a>
											</div>
											<p class="packetNum">1</p>
										</li> -->
									</ul>
									<ul class="pagination clearfix" id="pagination1">
										<li class="prev1">
											<a href="javascript:void(0);">
												<i class="arrow arrow2"></i>上一页
											</a>
										</li>
										<li class="page active">
											<a href="javascript:void(0);">
												<i class="pageCur">1</i>/<i class="pageSum">11</i>
											</a>
										</li>
										<li class="next1">
											<a href="javascript:void(0);">
												下一页<i class="arrow arrow3"></i>
											</a>
										</li>
									</ul>
								</div>
						    </div>
							<!-- 高级红包  -->
						    <div id='tab-5' class="tabInfo w1" data-id="2">
								<span class="t2">
						    		每抢一个消耗<i class="tsp">10</i>次机会,您还有<i class="times">0</i>次机会
						    	</span>
								<div class="ulWrap w1">
									<ul class="ulList clearfix">
										 <!-- <li class="fl">
											<div class="packetLi w1">
												<a href="javascript:" title="" class="usedMask w1">
													<p class="prize w1">29元</p>
													<p class="userName w1">asd</p>
													<p class="getTime w1">2019-01-03</p>
												</a>
											</div>
											<p class="packetNum">1</p>
										</li> -->
									</ul>
									<ul class="pagination clearfix" id="pagination2">
										<li class="prev1">
											<a href="javascript:void(0);">
												<i class="arrow arrow2"></i>上一页
											</a>
										</li>
										<li class="page active">
											<a href="javascript:void(0);">
												<i class="pageCur">1</i>/<i class="pageSum">11</i>
											</a>
										</li>
										<li class="next1">
											<a href="javascript:void(0);">
												下一页<i class="arrow arrow3"></i>
											</a>
										</li>
									</ul>
								</div>
						    </div>
						    <!-- 终级红包 -->
						    <div id='tab-6' class="tabInfo w1" data-id="3">
						    	<span class="t2">
						    		每抢一个消耗<i class="tsp">100</i>次机会,您还有<i class="times">0</i>次机会
						    	</span>
								<div class="ulWrap w1">
									<ul class="ulList clearfix">
										<!-- <li class="fl">
											<div class="packetLi w1">
												<a href="javascript:" title="" class="usedMask w1">
													<p class="prize w1">29元</p>
													<p class="userName w1">asd</p>
													<p class="getTime w1">2019-01-03</p>
												</a>
											</div>
											<p class="packetNum">1</p>
										</li> -->
									</ul>
									<ul class="pagination clearfix" id="pagination3">
										<li class="prev1">
											<a href="javascript:void(0);">
												<i class="arrow arrow2"></i>上一页
											</a>
										</li>
										<li class="page active">
											<a href="javascript:void(0);">
												<i class="pageCur">1</i>/<i class="pageSum">11</i>
											</a>
										</li>
										<li class="next1">
											<a href="javascript:void(0);">
												下一页<i class="arrow arrow3"></i>
											</a>
										</li>
									</ul>
								</div>
						    </div>
						    <section class="tabsBar mat">
						    	<ul class="tabsBarC clearfix">
							        <li id="bar1" class="fl" data-id="1">
							        	<a class="tabsBarT tt4 active" alt="#tab-7">显示全部红包</a>
							        </li>
							        <li id="bar2" class="fl" data-id="2">
							        	<a class="tabsBarT tt5" alt="#tab-8">只显示可抢的红包</a>
							        </li>
							    </ul>
							</section>
						</div>

				    </div>
				    <!-- 排行榜 -->
				    <div id='tab-2' class="tabCon w1">
						<div class="rankIntro w1">
							累计已送出 <i id="sum" class="sum">0</i> 元现金
						</div>
						<div class="rankWrap w1">
							<table id="rankList" class="rankList mat" border="1" cellspacing="0" cellpadding="0">
								<!-- <tr>
									<th>玩家</th>
									<th>累计抢红包金额</th>
								</tr> -->
								<!-- <tr>
									<td>sdsd</td>
									<td>65658元</td>
								</tr>
								<tr>
									<td>sdsd</td>
									<td>65658元</td>
								</tr> -->
							</table>
						</div>
					</div>
					<!-- 我的记录 -->
					<div id='tab-3' class="tabCon w1">
						<div class="record w1">
							<div  id="desc" class="reTitle w1">
								<span class="rt2">您一共抢到<i class="rsp">0</i>个红包 ，包含<i class="rsp">0</i>元现金，<i class="rsp">0</i>张刮刮乐</span>
							</div>
							<div class="tableWrap w1">
								<ul id="myList" class="myList mat">
									<!-- <li>
										<p class="mTime">
											领取时间:<i class="m1">2018-12-30  12:33:23</i>
										</p>
										<p class="mTime">
											<span class="mType mt1">
												红包类型:<i class="m2">初级红包</i>
											</span>
											<span class="mType">
												红包内容:<i class="m2">刮刮乐</i>
											</span>
										</p>
										<p class="mTime">
											红包序号:<i class="m1">2164as6dfsf4646fsd</i>
										</p>
									</li> -->
								</ul>
							</div>
						</div>
					</div>
			</div>
		</div>
	</div>
	<div class="shade-box">
		<div class="content">
			<div class="close"></div>
			<div class="success">
				<p>中奖啦!</p>
				<span>恭喜您中奖<i class="num">500元</i>现金红包</span>
			</div>
			<div class="error">
				<p>很抱歉!</p>
				<span>您的机会不足以兑换该红包</span>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.tabslet.min.js"></script>
	<!-- <script type="text/javascript" src="js/jqPaginator.js"></script> -->
	<script type="text/javascript" src="js/popup.js"></script>
	<script type="text/javascript">
		FastClick.attach(document.body);

		$('.tabs').tabslet({
	    	mouseevent: 'click',
		  	attribute: 'alt',
		  	animation: false
	    });
	    $('.tabsC').tabslet({
	    	mouseevent: 'click',
		  	attribute: 'alt',
		  	animation: false
	    });
	    $('.tabsBar').tabslet({
	    	mouseevent: 'click',
		  	attribute: 'alt',
		  	animation: false
	    });

	    $(document).ready(function(){
			function stopScrolling(event) {
				event.preventDefault();
			}
			document.addEventListener('touchmove',stopScrolling,false);
		})

	    // 滚动穿透问题
	    var top = 0;
		function show() {
		  top = document.body.scrollTop || document.documentElement.scrollTop;
		  document.body.style.cssText = `position: fixed;width: 100%;top: ${top}px;`;
		  $('#mask').css('display','block');
		}

		// 隐藏弹出层
		function hide() {
		 document.body.style.cssText = '';
		 document.body.scrollTop = top;
		  $('#mask').css('display','none');
		}
			$('.goRedpacket').on('click', function(){
				show();
			});
			$('.closeMask').on('click',function(){
					hide();
			});

			// 剩余机会
			queryChance();
			// 豪奖排行榜
			queryRanking();
			// 我的抢红包记录
			queryMe();
			// 抢红包
			// redBagType	int	红包类型（1;初级红包；2：高级红包；3：终极红包）
			// entry	String	红包序号
			// showType	int	展示类型（1：显示全部红包；2：只显示可抢的红包）
			// redBagType	int	红包类型（1;初级红包；2：高级红包；3：终极红包）
			var redBagType = 1;
			var entry = 0;
			var showType = 1;
			var redBagType = 1;

			var page = 1;
			// 红包奖池
			queryPacket(showType,redBagType,page);

			// 显示全部与否
			$('.tabsBarC li').on('click',function(){
	            var $this = this;
	            showType = $( '.tabsBarC li.active' ).attr("data-id");
	            $('.pageCur').html('1');
	            page = 1;
	            redBagType = $('.tabCTop li.active').attr("data-id");
	            queryPacket(showType,redBagType,page);
	      	});

			// 显示初高终极
			$('.tabCTop li').on('click',function(){
				// alert('000')
				$('.pageCur').html('1');
	            page = 1;
	            var $this = this;
	            redBagType = $( $this ).attr("data-id");
	            showType = $( '.tabsBarC li.active' ).attr("data-id");
	            // alert(redBagType)
	            queryPacket(showType,redBagType,page);
	      	});

	      	// 翻页
			$('.next1').on('click',function(){
				page = $('.pageCur').html();
	            page++;
	            maxPage = $('.pageSum').html();
	            if ( page > maxPage ){
	            	return;
	            }
	            showType = $('.tabsBarC li.active').attr("data-id");
	            redBagType = $('.tabCTop li.active').attr("data-id");
	            queryPacket(showType,redBagType,page);
	      	});
	      	$('.prev1').on('click', function(){
	      		page = $('.pageCur').html();
	            page--;
	            if ( page < 1 ){
	            	return;
	            }
	            showType = $( '.tabsBarC li.active' ).attr("data-id");
	            redBagType = $('.tabCTop li.active').attr("data-id");
	            queryPacket(showType,redBagType,page);
	      	});

			// 抢红包
	      	$(document).on('click', '.packetLi',function(){
	      		$('.packetLi').css('pointer-events','none');
	      		var $this = this;
	     		redBagType = $('.tabCTop li.active').attr("data-id");
	     		entry = $( $this ).attr("data-number");
		        draw(redBagType,entry);
	     	});

      	// 抢红包剩余机会
		// /activity.do?method=showRedEnvelopeNumber
	     	function queryChance(){
				$.ajax({
					url: "/dscagamesclient/activity.do?method=showRedEnvelopeNumber",
				    jsonp: "callback",
				    // dataType: "jsonp",
				    async: true,
				    data: {},    //参数值
				    type: "GET",   //请求方式
				    beforeSend: function() {
				        //请求前的处理
				    },
				    success: function(req) {
						if( req.success == 1 ) {
							var times = req.redEnvelopeNumber;
							$('.times').html( times );
				    	}else if( req.success == 0 ){
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.msg
						    })
				    	}
				    }
				});
			}

		// 豪奖排行榜
		// /activity.do?method=showBigAward
			function queryRanking(){
				$.ajax({
					url: "/dscagamesclient/activity.do?method=showBigAward",
				    jsonp: "callback",
				    // dataType: "jsonp",
				    async: true,
				    data: {},    //参数值
				    type: "GET",   //请求方式
				    beforeSend: function() {
				        //请求前的处理
				    },
				    success: function(req) {
						if( req.success == 1 ) {
							var sum = req.totalPrize;
							var bigAward = req.bigAward;
							$('#sum').html( sum );
							$('#rankList').html('');
							var raHtml = '<tr><th>玩家</th><th>累计抢红包金额</th></tr>';
							$('#rankList').append(raHtml);
				    		for(var i in bigAward){
							   var html = '<tr><td>'+ bigAward[i].userName +'</td><td>' + bigAward[i].redBagPrize + '元</td></tr>'
							   $('#rankList').append(html);
							}
				    	}else if( req.success == 0 ){
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.msg
						    })
				    	}
				    }
				});
			}

		// 我的抢红包记录
		// /activity.do?method=myRedBag
			function queryMe(){
				$.ajax({
					url: "/dscagamesclient/activity.do?method=myRedBag",
				    jsonp: "callback",
				    // dataType: "jsonp",
				    async: true,
				    data: {},    //参数值
				    type: "GET",   //请求方式
				    beforeSend: function() {
				        //请求前的处理
				    },
				    success: function(req) {
				    	if ( req.success == -1 ) {
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': '请先登录！'
						    })
				    	}else if( req.success == 1 ) {
				    		var desc = req.desc;
							var myRedBag = req.myRedBag;
							$('#desc').html( desc );
							$('#myList').html('');
							for(var i in myRedBag){
								var html = '<li><p class="mTime">领取时间:<i class="m1">'+ myRedBag[i].getTime +'</i></p><p class="mTime"><span class="mType mt1">红包类型:<i class="m2">' + myRedBag[i].redBagType + '</i></span><span class="mType">红包内容:<i class="m2">' + myRedBag[i].redBagPrize + '</i></span></p><p class="mTime">红包序号:<i class="m1">'+ myRedBag[i].redBagNumber +'</i></p></li>';
							   $('#myList').append(html);
							}
				    	}else if( req.success == 0 ){
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.msg
						    })
				    	}
				    }
				});
			}

		// 红包奖池
		// /activity.do?method=getRedBagPool
			function queryPacket(showType,redBagType,page){
				$.ajax({
					url: "/dscagamesclient/activity.do?method=getRedBagPool",
				    jsonp: "callback",
				    // dataType: "jsonp",
				    async: true,
				    data: { "showType": showType, "redBagType": redBagType, "page": page, pageSize: 45 },    //参数值
				    type: "GET",   //请求方式
				    beforeSend: function() {
				        //请求前的处理
				    },
				    success: function(req) {
				    	if( req.success == 1 ) {
							var redBagList = req.redBagList;
							$('.pageCur').html( page );
							$('.pageSum').html( req.pageNum );

							$('.ulList').html('');//加载前清空列表
							for(var i in redBagList){
								if ( redBagList[i].isUsed == 1 ) {
									var isUsed = 'block';
								} else if ( redBagList[i].isUsed == 0 ){
									var isUsed = 'none';
								}
							   var html = '<li class="fl"><div class="packetLi w1" data-used="' + redBagList[i].isUsed  + '" data-number="' + redBagList[i].redBagNumber+ '"><a href="javascript:" title="" class="usedMask w1" style="display:' + isUsed + ';"><p class="prize w1">'+ redBagList[i].redBagPrize +'</p><p class="userName w1">'+ redBagList[i].userName +'</p><p class="getTime w1">'+ redBagList[i].getTime +'</p></a></div><p class="packetNum">'+ redBagList[i].entry +'</p></li>';
							   $('.ulList').append(html);
							}
				    	}else if( req.success == 0 ){
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': req.msg
						    })
				    	}
				    }
				});
			}

			// 抢红包
			// /activity.do?method=openRedBag
			function draw(redBagType,entry){
				$.ajax({
					url: "/dscagamesclient/activity.do?method=openRedBag",
				    jsonp: "callback",
				    // dataType: "jsonp",
				    async: true,
				    data: { "redBagType": redBagType, "entry": entry },    //参数值
				    type: "GET",   //请求方式
				    beforeSend: function() {
				        //请求前的处理
				    },
				    success: function(req) {
				    	if ( req.success == -1 ) {
				    		var popup = new Popup({
				    			'bgcolor': '#ed9e14',
				    			'submitbgcolor': '#ed9e14',
				    			'submitbordercolor': '#ed9e14',
						        'type': 'submit',
						        'title': '提示信息',
						        'text': '请先登录！',
						        'submitCallBack': function(){
    								$('.packetLi').css('pointer-events','visible');
						      	},
						      	'closeCallBack': function(){
    								$('.packetLi').css('pointer-events','visible');
					      		}
						    })
				    	}else if( req.success == 1 ) {
								openSucess(req.msg)
								queryChance();
								queryRanking();
								queryMe();
								page = $('.pageCur').html();
								showType = $('.tabsBarC li.active').attr("data-id");
								redBagType = $('.tabCTop li.active').attr("data-id");
								if (showType === '2') {
									var tabId = Number($('.tabCTop li.active').attr('data-id'))
									var redNum = $('#tab-' + (tabId + 3)).find('.ulWrap .ulList li').length
									if (redNum <= 1) page = Number(page) - 1
									if (page < 1) page = 1
									$('.pageCur').eq(tabId - 1).text(page)
								}
								queryPacket(showType,redBagType,page);
				    	}else if( req.success == 0 ){
								$('.packetLi').css('pointer-events','visible');
								openError(req.msg)
				    	}
				    }
				});
			}
			// 关闭提示框
			$('.shade-box .close').on('click', function() {
				$('.shade-box').css('display', 'none')
			})
			
			function openError(msg) {
				$('.shade-box .error span').text(msg)
				$('.shade-box .success').css('display', 'none')
				$('.shade-box .error').css('display', 'block')
				$('.shade-box').css('display', 'block')
			}

			function openSucess(msg) {
				$('.shade-box .success span').text(msg)
				$('.shade-box .success').css('display', 'block')
				$('.shade-box .error').css('display', 'none')
				$('.shade-box').css('display', 'block')
			}
		//  })
	</script>
</body>
</html>